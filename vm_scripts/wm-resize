#!/bin/bash
mode=$1
MODE_WINDOW="1920x1080_vm"
MODE_FULL="2560x1440_vm"
$(lsmod | grep qxl > /dev/null)
if [ $? == 0  ]; then
    if [ "$(xrandr | grep $MODE_WINDOW)" = ""  ]; then
        xrandr --newmode "$MODE_WINDOW" 172.51  1920 2040 2248 2576  1080 1081 1084 1118  -HSync +Vsync
        xrandr --addmode Virtual-0 $MODE_WINDOW
    fi
    if [ "$(xrandr | grep $MODE_FULL)" = ""  ]; then
        xrandr --newmode "$MODE_FULL" 311.31  2560 2744 3024 3488  1440 1441 1444 1490  -HSync +Vsync
        xrandr --addmode Virtual-0 $MODE_FULL
    fi

    case $mode in
        window)
            xrandr --output Virtual-0 --mode $MODE_WINDOW
            ;;
        *)
            xrandr --output Virtual-0 --mode $MODE_FULL
            ;;
    esac
fi
